version: 1
frontend:
  phases:
    preBuild:
      commands:
        - cd standalone
        - npm ci --legacy-peer-deps
    build:
      commands:
        # Build the frontend (webpack)
        - npm run build
        # Build the backend (TypeScript compilation)
        - npx tsc -p tsconfig.server.json
  artifacts:
    baseDirectory: standalone
    files:
      - 'dist/**/*'
      - 'bin/**/*'
      - 'node_modules/**/*'
      - 'package.json'
      - 'package-lock.json'
  cache:
    paths:
      - standalone/node_modules/**/*
backend:
  phases:
    build:
      commands:
        - echo "Backend build completed during frontend phase"
